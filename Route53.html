<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route 53</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container2">
        <div class="header">
            <h1>Route 53 - DNS & Domain Management</h1>
            <hr>
        </div>

        <h2>DNS Fundamentals</h2>
        <p><strong>Domain Name System (DNS)</strong> translates hostnames into machine IP addresses and is the backbone of the internet.</p>
        <ul>
            <li><strong>Hierarchy Naming Structure</strong></li>
            <ul>
                <li>Organized in a hierarchical tree structure for domain name resolution</li>
            </ul>

            <li><strong>DNS Terminologies</strong></li>
            <ul>
                <li><strong>Domain Registrar:</strong> Service that allows you to register domain names (e.g., Route 53, GoDaddy)</li>
                <li><strong>DNS Records:</strong> Instructions that define how to route traffic for a specific domain or subdomain</li>
                <li><strong>Zone File:</strong> Text file containing DNS records for a domain</li>
                <li><strong>Name Server:</strong> Server that responds to DNS queries and provides the IP address associated with a domain name</li>
                <li><strong>Top Level Domain (TLD):</strong> The rightmost part of a domain name (.com, .us, .in, .edu, etc.)</li>
                <li><strong>Second Level Domain:</strong> The domain name immediately to the left of the TLD (e.g., "example" in example.com)</li>
            </ul>

            <li><strong>How DNS Works</strong></li>
            <ul>
                <li>When a website is accessed from a browser, the resolution process follows this order:</li>
                <ol>
                    <li>Local DNS Server (managed by your Internet Service Provider)</li>
                    <li>Root DNS Server</li>
                    <li>TLD DNS Server</li>
                    <li>SLD (Second Level Domain) / Authoritative Name Server</li>
                </ol>
            </ul>
        </ul>

        <hr class="soft-divide">
        <h2>Route 53 Overview</h2>
        <p><strong>Route 53</strong> is AWS's fully managed DNS service with high availability and scalability.</p>
        <ul>
            <li><strong>Key Characteristics:</strong></li>
            <ul>
                <li>Highly available and scalable DNS service</li>
                <li>Fully managed and <strong>Authoritative DNS</strong> (customers can update DNS records)</li>
                <li>Acts as a Domain Registrar</li>
                <li>Ability to check the health of records</li>
                <li><strong>Only AWS service that can provide 100% SLA</strong></li>
            </ul>

            <li><strong>DNS Records</strong></li>
            <ul>
                <li>Each record contains:</li>
                <ul>
                    <li>Domain/subdomain name</li>
                    <li>Record type</li>
                    <li>Value</li>
                    <li>Routing policy</li>
                    <li>TTL (Time To Live)</li>
                </ul>
                <li><strong>Supported Record Types:</strong></li>
                <ul>
                    <li><strong>A:</strong> Maps a hostname to an IPv4 address</li>
                    <li><strong>AAAA:</strong> Maps a hostname to an IPv6 address</li>
                    <li><strong>CNAME:</strong> Maps a hostname to another hostname. The target must be a domain name that has an A or AAAA record</li>
                    <li><strong>NS:</strong> Name Servers for the hosted zone which control traffic routing for the domain</li>
                </ul>
            </ul>
        </ul>

        <hr class="soft-divide">
        <h2>Hosted Zones</h2>
        <p>A hosted zone is a container of records that define how to route traffic to a domain and its subdomains.</p>
        <ul>
            <li><strong>Public Hosted Zones:</strong></li>
            <ul>
                <li>Contain records that specify how to route traffic on the internet</li>
                <li>Records are publicly accessible</li>
            </ul>

            <li><strong>Private Hosted Zones:</strong></li>
            <ul>
                <li>Contain records that specify how to route traffic within one or more VPCs</li>
                <li>Records are only accessible within the associated VPC(s)</li>
            </ul>

            <li><strong>Pricing:</strong> $0.50 per month per zone</li>
        </ul>

        <hr class="soft-divide">
        <h2>TTL (Time To Live)</h2>
        <p>TTL specifies the length of time a DNS record lives in the client-side cache.</p>
        <ul>
            <li>Set based on the frequency of change for the underlying IP address</li>
            <li>Example: A static website would benefit from a longer TTL to reduce server requests</li>
            <li><strong>Trade-offs:</strong></li>
            <ul>
                <li>Higher TTL = reduced traffic to DNS servers but may serve outdated records</li>
                <li>Lower TTL = more up-to-date records but increased traffic to DNS servers</li>
            </ul>
            <li><span style="font-style: italic;"><strong>Mandatory for every record except Alias records</strong></span></li>
        </ul>

        <hr class="soft-divide">
        <h2>CNAME vs. Alias</h2>
        <p>AWS resources expose AWS hostnames (e.g., <span style="font-family: monospace;">elb-1234.us-east-2.elb.amazonaws.com</span>). You may want to map a custom domain (e.g., myapp.mydomain.com) to this resource.</p>
        <ul>
            <li><strong>CNAME (Canonical Name):</strong></li>
            <ul>
                <li>Points a hostname to any other hostname</li>
                <li>Works only for <strong>non-root domains</strong> (e.g., www.example.com, but NOT example.com)</li>
                <li>Standard DNS functionality</li>
            </ul>

            <li><strong>Alias (AWS Extension):</strong></li>
            <ul>
                <li>AWS extension to DNS functionality</li>
                <li>Maps a hostname to an AWS resource</li>
                <li>Automatically recognizes changes in the resource's IP address</li>
                <li>Works for both root and non-root domains</li>
                <li><strong>Free of charge</strong> with native health checks</li>
                <li>Always of type A/AAAA for AWS resources (IPv4/IPv6)</li>
                <li><strong>Cannot set TTL for Alias records</strong></li>
            </ul>

            <li><strong>Alias Record Targets (AWS Resources):</strong></li>
            <ul>
                <li>Elastic Load Balancers (ELB)</li>
                <li>CloudFront Distributions</li>
                <li>API Gateway</li>
                <li>Elastic Beanstalk environments</li>
                <li>S3 Websites</li>
                <li>VPC Interface Endpoints</li>
                <li>Global Accelerator</li>
                <li>Route 53 records in the same hosted zone</li>
                <li style="font-weight: bold; color: red;"><strong>CANNOT SET AN ALIAS RECORD FOR AN EC2 DNS NAME</strong></li>
            </ul>
        </ul>

        <hr class="soft-divide">
        <h2>Routing Policies</h2>
        <p>Routing policies define how Route 53 responds to DNS queries. <span style="font-style: italic;">Note: DNS does not route traffic; it only responds to DNS queries.</span></p>

        <ul>
            <li><strong>Simple Routing</strong></li>
            <ul>
                <li>Routes traffic to a single resource</li>
                <li>Can specify multiple values in the same record; a random value is chosen by the client</li>
                <li>When Alias is enabled, specify only one AWS resource</li>
                <li><strong>Cannot be associated with Health Checks</strong></li>
            </ul>

            <li><strong>Weighted Routing</strong></li>
            <ul>
                <li>Control the percentage of requests that go to each specific resource</li>
                <li>DNS records must have the same name and type</li>
                <li>Can be associated with Health Checks</li>
                <li><strong>Use Cases:</strong> Load balancing between regions, testing new app versions</li>
                <li>Assign a weight of 0 to stop sending traffic to a resource</li>
                <li>If all records have weight 0, traffic is distributed equally</li>
            </ul>

            <li><strong>Latency-Based Routing</strong></li>
            <ul>
                <li>Redirect to the resource with the least latency closest to the user</li>
                <li>Helpful when latency is the priority</li>
                <li>Can be combined with Health Checks</li>
                <li>Latency is measured based on traffic between users and AWS regions</li>
            </ul>

            <li><strong>Failover Routing</strong></li>
            <ul>
                <li>Primary Record:</li>
                <ul>
                    <li><strong>MUST be associated with a Health Check</strong></li>
                </ul>
                <li>Secondary Record (Failover target):</li>
                <ul>
                    <li>Used when the primary record fails</li>
                    <li>Optionally can have a Health Check attached</li>
                </ul>
            </ul>

            <li><strong>Geolocation Routing</strong></li>
            <ul>
                <li>Routes traffic based on physical user location (different from latency-based routing)</li>
                <li>Specify location by:</li>
                <ul>
                    <li>Continent</li>
                    <li>Country</li>
                    <li>State (most precise)</li>
                </ul>
                <li><strong>Important:</strong> Create a default record for cases with no location match</li>
                <li><strong>Use Cases:</strong> Website localization, content distribution restrictions, load balancing</li>
                <li>Can be associated with Health Checks</li>
            </ul>

            <li><strong>Geoproximity Routing</strong></li>
            <ul>
                <li>Routes traffic based on geographic location with the ability to shift more traffic to resources based on defined bias</li>
                <li>Bias controls where traffic flows</li>
                <li>Requires <strong>AWS Traffic Flow</strong> to implement</li>
            </ul>

            <li><strong>IP-Based Routing</strong></li>
            <ul>
                <li>Define routing based on Client IP address</li>
                <li>Provide a list of CIDR blocks for clients and corresponding endpoints</li>
                <li><strong>Use Cases:</strong> Optimize performance and reduce network costs</li>
                <li>Example: Route end users from a particular ISP to a specific endpoint</li>
            </ul>

            <li><strong>Multivalue Routing</strong></li>
            <ul>
                <li>Use when routing traffic to multiple resources</li>
                <li>Route 53 returns multiple values and resources</li>
                <li>Can be associated with Health Checks</li>
                <li>Up to 8 healthy records are returned for each multivalue query</li>
                <li style="font-weight: bold; color: red;"><strong>NOT a substitute for having an ELB</strong></li>
                <li><span style="font-style: italic;">Acts like a client-side load balancer</span></li>
            </ul>
        </ul>

        <hr class="soft-divide">
        <h2>Health Checks</h2>
        <p>Health Checks monitor the availability of resources and are essential for failover and routing policies.</p>
        <ul>
            <li><strong>HTTP Health Checks (Public Resources Only)</strong></li>
            <ul>
                <li>15 health checkers will check the endpoint health</li>
                <li>Configure healthy/unhealthy threshold</li>
                <li>Sent on a 30-second interval by default (can be reduced to 10 seconds for additional cost)</li>
                <li>Supports HTTP/HTTPS/TCP protocols</li>
                <li><strong>Health Status Definition:</strong> Healthy when >18% of health checks report the endpoint as healthy</li>
                <li>A pass occurs only when the response is in the 200 or 300 status range</li>
                <li>Checks the first 5,120 bytes of the response to determine health</li>
                <li><strong>Network Configuration:</strong> Configure routers/firewalls to allow incoming requests from Route 53 Health Checkers</li>
            </ul>

            <li><strong>Calculated Health Checks</strong></li>
            <ul>
                <li>Combine results of multiple checks into a single check</li>
                <li>Define a parent check with child checks</li>
                <li>Operators available: AND, OR, NOT</li>
                <li>Monitor up to 256 child health checks</li>
                <li>Specify how many child checks must pass for the parent to pass</li>
                <li><strong>Use Case:</strong> Perform maintenance on a website without failing all health checks</li>
            </ul>

            <li><strong>Health Checks for Private Hosted Zones</strong></li>
            <ul>
                <li>To check the health of private resources:</li>
                <ul>
                    <li>Set a CloudWatch alarm on a specific metric</li>
                    <li>When the alarm is breached, the health check identifies the resource as unhealthy</li>
                    <li>The health check monitors the alarm itself</li>
                </ul>
            </ul>
        </ul>

        <hr class="soft-divide">
        <h2>Route 53 Resolver</h2>
        <p>Route 53 Resolver enables DNS resolution between AWS and on-premises networks.</p>
        <ul>
            <li><strong>Default Behavior:</strong></li>
            <ul>
                <li>Answers DNS queries for local domain names for EC2 instances</li>
                <li>Resolves records in private hosted zones</li>
                <li>Resolves records in public name servers</li>
            </ul>

            <li><strong>Hybrid DNS Resolution</strong></li>
            <ul>
                <li>Resolve DNS queries between VPCs and on-premises networks</li>
                <li><strong>Resolver Endpoints:</strong></li>
                <ul>
                    <li><strong>Inbound Endpoint:</strong> Allows DNS resolvers to resolve domain names for AWS resources and records in private hosted zones</li>
                    <li><strong>Outbound Endpoint:</strong> Forwards DNS queries to your on-premises DNS resolvers</li>
                </ul>
            </ul>
        </ul>
        
<hr class="soft-divide">
<h2>Traffic Flow</h2>
<ul>
    <li><strong>AWS Traffic Flow:</strong> Visual tool for creating complex routing policies</li>
    <ul>
        <li>Create and manage traffic policies without writing code</li>
        <li>Versioning support for policies</li>
        <li>Reusable across multiple hosted zones and domains</li>
        <li>Simplifies geoproximity and complex multi-region deployments</li>
    </ul>
</ul>

<hr class="soft-divide">
<h2>Route 53 and Load Balancers Integration</h2>
<ul>
    <li><strong>Common Pattern:</strong> Route 53 + ELB for high availability</li>
    <ul>
        <li>Route 53 routes traffic to ELBs across regions</li>
        <li>Health checks on Route 53 detect ELB failures</li>
        <li>ELBs distribute traffic across EC2 instances within a region</li>
    </ul>
    <li>Alias records can point directly to ELBs, NLBs, and ALBs</li>
</ul>

<hr class="soft-divide">
<h2>Route 53 with CloudFront</h2>
<ul>
    <li>Use Alias records to point custom domains to CloudFront distributions</li>
    <li>Combine geolocation routing with CloudFront for regional content delivery</li>
    <li>Route 53 health checks can monitor CloudFront distribution health</li>
</ul>

<hr class="soft-divide">
<h2>Cost Optimization</h2>
<ul>
    <li><strong>Hosted Zone Pricing:</strong> $0.50/month per zone</li>
    <li><strong>Query Pricing:</strong> $0.40 per million queries</li>
    <li><strong>Health Check Pricing:</strong> Standard checks $0.50/month, fast interval $1.00/month</li>
    <li>Calculated health checks share pricing with standard checks</li>
    <li>Use Alias records (free) instead of CNAME where possible to reduce query costs</li>
</ul>

<hr class="soft-divide">
<h2>Common Exam Scenarios</h2>
<ul>
    <li><strong>Multi-Region Failover:</strong> Use failover routing with health checks on primary region</li>
    <li><strong>Active-Active Setup:</strong> Use weighted or latency-based routing for load distribution</li>
    <li><strong>Blue-Green Deployment:</strong> Use weighted routing to gradually shift traffic (0% to 100%)</li>
    <li><strong>Disaster Recovery:</strong> Combine with backup resources in secondary region</li>
    <li><strong>Global Application:</strong> Latency-based routing for automatic regional routing</li>
    <li><strong>Compliance/Data Residency:</strong> Geolocation routing to restrict content by region</li>
</ul>

<hr class="soft-divide">
<h2>Route 53 Best Practices</h2>
<ul>
    <li>Always use Health Checks with failover routing</li>
    <li>Set appropriate TTLs based on change frequency (not too low to avoid excessive queries)</li>
    <li>Use Alias records for AWS resources (cheaper and more reliable than CNAME)</li>
    <li>Combine Route 53 with CloudFront for global content delivery</li>
    <li>Use calculated health checks for complex multi-resource monitoring</li>
    <li>For private hosted zones, use Route 53 Resolver for hybrid environments</li>
    <li>Test failover scenarios regularly to ensure RTO/RPO targets are met</li>
</ul>

<hr class="soft-divide">
<h2>Route 53 vs Other Services</h2>
<ul>
    <li><strong>Route 53 vs ELB:</strong> Route 53 = DNS (Layer 7), ELB = Load Balancing (Layer 4-7)</li>
    <li><strong>Route 53 vs CloudFront:</strong> Route 53 = DNS routing, CloudFront = content caching and delivery</li>
    <li><strong>Route 53 vs Global Accelerator:</strong> Route 53 = DNS-based, Global Accelerator = anycast routing (faster for non-HTTP protocols)</li>
</ul>
    </div>
</body>
</html>